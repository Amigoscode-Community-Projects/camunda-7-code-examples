# Camunda BPM Process Engine Plugin
A Plugin for [Camunda BPM](http://docs.camunda.org). Example on how to implement a HistoryRemovalTimeProvider which set the removal time according to a DynamicRemovalTimeCalculationStrategy.

This strategy is a function that takes the same parameters as the HistoryRemovalTimeProvider and returns an Integer object (may also be null).

Here, two example implementations exist:
* RuntimeQueryRemovalTimeCalculationStrategy: Queries the RuntimeService of the Engine for a certain variable, useful if you want to use a variable and calculate the time to live during the execution of a process instance
* BusinessKeyDmnRemovalTimeCalculationStrategy: Takes the BusinessKey and executes a DMN table on the DecisionService, useful if the business key contains the information required and the business process itself does not need to be changed

Both implementation are totally valid depending on how you might want to determine the History TTL for a certain process instance.
If you start the spring boot application, the plugin provided by the CamundaAppConfig.getPlugin() method will be used.

When using the BusinessKeyDmn strategy, make sure you deploy the .dmn file attached in src/main/resources

This project has been generated by the Maven archetype
[camunda-archetype-spring-boot-7.15.0](https://docs.camunda.org/manual/latest/user-guide/process-applications/maven-archetypes/).

## Further ideas

* Use the EndActivityId of the HistoricProcessInstanceEventEntity to determine the History TTL, maybe also by implementing a DMN table


## License
[Apache License, Version 2.0](http://www.apache.org/licenses/LICENSE-2.0).

<!-- HTML snippet for index page
  <tr>
    <td><img src="snippets/engine-plugin-rule-dependent-history-ttl/src/main/resources/process.png" width="100"></td>
    <td><a href="snippets/engine-plugin-rule-dependent-history-ttl">Camunda BPM Process Engine Plugin</a></td>
    <td>A Plugin for [Camunda BPM](http://docs.camunda.org).</td>
  </tr>
-->

## Environment Restrictions
Built and tested against Camunda Platform version 7.15.0.

## License
[Apache License, Version 2.0](http://www.apache.org/licenses/LICENSE-2.0).

<!-- Tweet
New @Camunda example: Camunda Spring Boot Application - Spring Boot Application using [Camunda](http://docs.camunda.org). https://github.com/camunda-consulting/code/tree/master/snippets/engine-plugin-variable-depending-history-ttl
-->
